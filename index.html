<!DOCTYPE html>
<html lang="fi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Suomalaiset Twitch-striimaajat</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #0d1117;
    color: white;
    overflow-x: hidden;
    position: relative;
    min-height: 100vh;
  }

  /* Partikkelitausta */
  #particles {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    pointer-events: none;
    z-index: 0;
  }
  .particle {
    position: absolute;
    border-radius: 50%;
    background: rgba(74, 222, 128, 0.3);
    animation-timing-function: linear;
    opacity: 0.6;
  }

  /* Grid kontti */
  #streamer-list {
    position: relative;
    z-index: 1;
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(280px,1fr));
    gap: 1.5rem;
  }

  /* Kortit */
  .card {
    position: relative;
    border-radius: 1.5rem;
    padding: 2rem 1.5rem;
    box-shadow: 0 0 15px rgba(74, 222, 128, 0.3);
    text-align: center;
    backdrop-filter: blur(8px);
    background: rgba(74, 222, 128, 0.15);
    color: white;
    cursor: default;
    transform: translateY(15px);
    opacity: 0;
    animation-fill-mode: forwards;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    user-select: none;
  }
  .card:hover {
    transform: translateY(0) scale(1.05);
    box-shadow: 0 0 35px rgba(74, 222, 128, 0.6);
    z-index: 10;
  }

  /* Animaatio kortille */
  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Hieman eri vÃ¤rit kortteihin */
  .color-j1mppaz {
    background: linear-gradient(135deg, rgba(74,222,128,0.25), rgba(16,185,129,0.4));
    box-shadow: 0 0 25px rgba(74, 222, 128, 0.7);
  }
  .color-skotti {
    background: linear-gradient(135deg, rgba(96,165,250,0.25), rgba(59,130,246,0.4));
    box-shadow: 0 0 25px rgba(59,130,246,0.7);
  }
  .color-gargee {
    background: linear-gradient(135deg, rgba(240,171,252,0.25), rgba(191,90,242,0.4));
    box-shadow: 0 0 25px rgba(191,90,242,0.7);
  }
  .color-lewaaw {
    background: linear-gradient(135deg, rgba(252,165,165,0.25), rgba(239,68,68,0.4));
    box-shadow: 0 0 25px rgba(239,68,68,0.7);
  }
  .color-novicci {
    background: linear-gradient(135deg, rgba(253,224,71,0.25), rgba(202,138,4,0.4));
    box-shadow: 0 0 25px rgba(202,138,4,0.7);
    color: #1a1a1a;
  }
  .color-hukkaw {
    background: linear-gradient(135deg, rgba(147,197,253,0.25), rgba(59,130,246,0.4));
    box-shadow: 0 0 25px rgba(59,130,246,0.7);
  }

  /* Nappi */
  .btn-twitch {
    background: #4ade80;
    color: #1a1a1a;
    padding: 0.7rem 1.6rem;
    border-radius: 0.8rem;
    font-weight: 600;
    margin-top: 1.5rem;
    display: inline-block;
    box-shadow: 0 4px 12px #4ade8077;
    transition: background-color 0.3s ease, transform 0.3s ease;
    cursor: pointer;
    text-decoration: none;
    user-select: none;
  }
  .btn-twitch:hover {
    background-color: #22c55e;
    transform: scale(1.1);
  }

  /* Live status */
  .live-status {
    font-weight: 700;
    padding: 0.3rem 0.8rem;
    border-radius: 9999px;
    font-size: 1rem;
    display: inline-block;
    margin-bottom: 1rem;
    box-shadow: 0 0 10px;
    text-transform: uppercase;
    user-select: none;
  }
  .live-status.live {
    background-color: #dc2626;
    color: white;
    box-shadow: 0 0 20px #dc2626bb;
  }
  .live-status.offline {
    background-color: transparent;
    color: #94a3b8;
    text-shadow: 0 0 6px #000000cc;
  }

  /* Header */
  h1 {
    font-size: 2.75rem;
    font-weight: 900;
    margin-bottom: 2rem;
    text-align: center;
    color: #4ade80;
    text-shadow: 0 0 8px #4ade80bb;
    user-select: none;
  }

  /* Search */
  #search {
    width: 100%;
    padding: 1rem;
    border-radius: 1rem;
    border: none;
    background-color: #161b22;
    color: white;
    font-size: 1.1rem;
    margin-bottom: 2rem;
    box-shadow: 0 0 8px #4ade80bb;
    outline-offset: 2px;
    user-select: none;
  }
  #search::placeholder {
    color: #94a3b8;
  }

  /* Footer */
  footer {
    text-align: center;
    padding: 1rem;
    color: #555;
    font-size: 0.9rem;
    user-select: none;
  }
</style>
</head>
<body>

<h1>ðŸ‡«ðŸ‡® Suomalaiset Twitch-striimaajat</h1>
<input id="search" placeholder="Etsi striimaajaa..." autocomplete="off" />

<div id="streamer-list"></div>

<div id="particles"></div>

<footer>Â© 2025 J1mPPaZ & Co</footer>

<script>
  const streamers = [
    { name: 'J1mPPaZ', twitchId: 'j1mppaz', colorClass: 'color-j1mppaz' },
    { name: 'Skotti', twitchId: 'skotti', colorClass: 'color-skotti' },
    { name: 'Gargee', twitchId: 'gargee', colorClass: 'color-gargee' },
    { name: 'Lewaaw', twitchId: 'lewaaw', colorClass: 'color-lewaaw' },
    { name: 'Novicci', twitchId: 'novicci', colorClass: 'color-novicci' },
    { name: 'Hukkaw', twitchId: 'hukkaw', colorClass: 'color-hukkaw' },
  ];

  async function fetchStreamData(username) {
    try {
      const res = await fetch(`https://decapi.me/twitch/status/${username}`);
      const text = await res.text();
      const isLive = !text.toLowerCase().includes('offline');
      const viewersMatch = text.match(/\((\d+)\s+katsojaa/);
      const viewers = viewersMatch ? viewersMatch[1] : null;
      return { isLive, viewers, statusText: text };
    } catch {
      return { isLive: false, viewers: null, statusText: 'Tietoja ei saatavilla' };
    }
  }

  function createParticle() {
    const particle = document.createElement('div');
    particle.classList.add('particle');
    const size = Math.random() * 6 + 4;
    particle.style.width = size + 'px';
    particle.style.height = size + 'px';
    particle.style.top = Math.random() * window.innerHeight + 'px';
    particle.style.left = Math.random() * window.innerWidth + 'px';
    particle.style.animationDuration = (Math.random() * 20 + 10) + 's';
    particle.style.animationName = 'moveParticle';
    particle.style.opacity = 0.2 + Math.random() * 0.4;
    return particle;
  }

  function initParticles() {
    const container = document.getElementById('particles');
    const particleCount = 60;
    for(let i = 0; i < particleCount; i++) {
      const p = createParticle();
      container.appendChild(p);
      animateParticle(p);
    }
  }

  function animateParticle(particle) {
    const xStart = parseFloat(particle.style.left);
    const yStart = parseFloat(particle.style.top);
    const xEnd = xStart + (Math.random() * 100 - 50);
    const yEnd = yStart + (Math.random() * 100 - 50);
    let start = null;

    function step(timestamp) {
      if (!start) start = timestamp;
      const progress = (timestamp - start) / (parseFloat(particle.style.animationDuration) * 1000);
      if (progress < 1) {
        const x = xStart + (xEnd - xStart) * progress;
        const y = yStart + (yEnd - yStart) * progress;
        particle.style.left = x + 'px';
        particle.style.top = y + 'px';
        requestAnimationFrame(step);
      } else {
        // Reset start position and animate again
        particle.style.left = xEnd + 'px';
        particle.style.top = yEnd + 'px';
        animateParticle(particle);
      }
    }
    requestAnimationFrame(step);
  }

  function createStreamerCard(s, index) {
    const card = document.createElement('div');
    card.className = `card ${s.colorClass}`;
    card.setAttribute('data-name', s.name.toLowerCase());
    card.style.animation = `fadeInUp 0.6s ease forwards`;
    card.style.animationDelay = (index * 0.2) + 's';

    const liveStatus = document.createElement('div');
    liveStatus.classList.add('live-status');
    liveStatus.textContent = 'Ladataan...';
    card.appendChild(liveStatus);

    const nameElem = document.createElement('h2');
    nameElem.textContent = s.name;
    nameElem.style.fontWeight = '900';
    nameElem.style.fontSize = '1.5rem';
    card.appendChild(nameElem);

    const twitchLink = document.createElement('a');
    twitchLink.href = `https://www.twitch.tv/${s.twitchId}`;
    twitchLink.target = '_blank';
    twitchLink.className = 'btn-twitch';
    twitchLink.textContent = 'Katso TwitchissÃ¤';
    card.appendChild(twitchLink);

    // Fetch live status asynchronously
    fetchStreamData(s.twitchId).then(data => {
      if(data.isLive) {
        liveStatus.textContent = `LIVE â€“ ${data.viewers ?? 'â€“'} katsojaa`;
        liveStatus.classList.remove('offline');
        liveStatus.classList.add('live');
      } else {
        liveStatus.textContent = 'OFFLINE-TILASSA';
        liveStatus.classList.remove('live');
        liveStatus.classList.add('offline');
      }
    }).catch(() => {
      liveStatus.textContent = 'Tietoja ei saatavilla';
      liveStatus.classList.remove('live');
      liveStatus.classList.add('offline');
    });

    return card;
  }

  window.onload = () => {
    const list = document.getElementById('streamer-list');
    streamers.forEach((s, i) => {
      const card = createStreamerCard(s, i);
      list.appendChild(card);
    });

    // Haku
    const searchInput = document.getElementById('search');
    searchInput.addEventListener('input', (e) => {
      const val = e.target.value.toLowerCase();
      for (const card of list.children) {
        const name = card.getAttribute('data-name');
        card.style.display = name.includes(val) ? '' : 'none';
      }
    });

    initParticles();
  };
</script>

</body>
</html>
